# Composite

### Compositeとは
- ツリー構造を持つデータに再帰的な処理を行えるようにするパターン
  - 任意の枝や末端の葉に対して、共通の手順でアクセスするためのAPIを提供


### クラス図
![クラス図](./%E3%82%AF%E3%83%A9%E3%82%B9%E5%9B%B3.png)

- Component
  - 抽象クラス or インターフェース
  - クライアントからアクセスさせるためのAPIを定義
- Leaf
  - Componentを継承する子クラス
  - ツリー構造の末端である葉に相当するクラス
  - 子に相当するオブジェクトは持たない
- Composite
  - Componentを継承する子クラス
  - ツリー構造の中で任意の枝に相当するクラス
  - フィールドに子に相当するオブジェクトを保持
  - Componentクラスのメソッド実装に加えて、子要素を追加・削除するためのメソッドも定義

### オブジェクト指向的要素
- ポリモーフィズムを利用したパターン
  - Componentでクライアントに対してアクセスさせるための共通APIを定義
  - クライアントは共通APIのみを使用することで、CompositeクラスやLeafクラスを意識する必要がなく同一のものとして扱える
  - Compositeクラスは小クラスに相当するComponent型のオブジェクトを保持している
  - Compositeクラスは子クラスの共通APIのみを使用することで、子クラスが枝なのか葉なのかを意識する必要がなくなる

### メリデメ
- メリット
  - 複雑なツリー構造を簡単に扱える
  - 新しい枝葉を簡単に追加できる
- デメリット
  - 枝と葉の機能が大きく異なる場合は共通のAPIを作ることが困難

### 使い所
- 再帰的なツリー構造を実装する場合
  - 例：ディレクトリツリー、組織階層、DOMツリー