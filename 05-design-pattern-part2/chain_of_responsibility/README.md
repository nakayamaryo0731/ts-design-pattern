# Chain of Responsibility

### Chain of Responsibilityとは
- クライアントからのリクエストを処理するオブジェクトを鎖のように繋げ、処理が可能なオブジェクトにリクエストを順に渡していくパターン
  - バケツリレー
  - リクエストが渡されたオブジェクト(ハンドラ)は自身で処理する必要があるかどうかを判断し、自分で処理できない場合は次のハンドラに渡す。

### クラス図
![クラス図](./%E3%82%AF%E3%83%A9%E3%82%B9%E5%9B%B3.png)

- Handler
  - 抽象クラス or インターフェース
  - クライアントからの要求を処理するAPIを定義
  - 内部に別の処理を行うオブジェクトを保持
- ConcreteHandler
  - Handlerを継承する小クラス
  - Handlerで定義されたAPIを満たすように自身が担当する処理を実装
- Client
  - Handlerにリクエストを送信

### オブジェクト指向的要素
- ポリモーフィズムを利用したパターン
  - オブジェクトのチェーンは全てHandler型であり、ConcreteHnadlerクラスを意識する必要がない
  - HandlerのAPIを使用することで、ConcreteHandlerの切り替えが可能になる

### メリデメ
- メリット
  - リクエスト処理の順序を制御できる
  - リクエストの送信側と受信側の結びつきを弱くする
  - 新しい処理クラスを容易に追加できる
- デメリット
  - 処理がたらい回しにされるので、パフォーマンスに影響が出る可能性がある

### 使い所
- 特定の順序で複数の処理を実行する必要がある場合
  - 例：フォームの入力値バリデーション
- Handlerの組み合わせと順序を実行時に変更したい場合
  - setterメソッドでnextをセットすることで、実行時に次の処理を決定できる