
# Mement

### Mementとは
- オブジェクトの現在の状態を保存しておき、状態が変化した場合でもその時の状態に戻すことができるようにするパターン
  - Ctrl + Z
  - 状態を生成するクラスとその履歴を管理するクラスを分離

### クラス図
![クラス図](./%E3%82%AF%E3%83%A9%E3%82%B9%E5%9B%B3.png)

- Originator
  - 保存対象となるクラス
  - 内部状態を保存するメソッドとリストアするメソッドを持つ
- Mement
  - Originatorオブジェクトを保存する記憶用クラス
  - Originator以外からインスタンスの生成・状態を変更できないようにする
- Caretaker
  - Mementオブジェクトを管理するクラス

### オブジェクト指向的要素
- カプセル化の破壊を防ぐためのパターン
  - Mementパターンを使わず内部状態の保存・復元をする場合、状態を公開する必要がある
  - Originator自身が保存操作を行うことで、内部状態を非公開としたままスナップショットを作成できる
  - MementのconstructorをprotectedとすることでMementのインスタンス生成をOriginatorのみに制限している

### メリデメ
- メリット
  - カプセル化を破壊することなく、オブジェクトの状態のスナップショットを作成・復元できる
  - スナップショットの管理をCaretakerに任せることで、Originatorクラスをシンプルに保つことができる
- デメリット
  - Mementoを大量に作成してしまうとメモリ使用量が増加する
  - プログラミング言語の仕様により、構成を変更する必要がある

### 使い所
- オブジェクトの状態を復元するためにスナップショットを作成したい場合
  - -Undoが必要なアプリケーション
  - ゲーム